(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{1906:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return t(2477)}])},3033:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(5893),s=t(8097),a=t.n(s);function c(e){let{shape:n}=e;return(0,r.jsx)("div",{className:a().wrap,children:(0,r.jsxs)("div",{className:a().loading,children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})})}},5486:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(5893),s=t(4254),a=t.n(s);function c(e){let{props:n}=e;return(0,r.jsx)("div",{className:a().wrap,children:(0,r.jsxs)("div",{className:a().inner,children:[(0,r.jsx)("div",{className:a().message,children:null==n?void 0:n.message}),(0,r.jsxs)("div",{className:a().button_box,children:[null==n?void 0:n.confirm,null==n?void 0:n.cancel]})]})})}t(3299),t(7294),t(1664)},2477:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var r=t(5893),s=t(1679),a=t.n(s),c=t(3299),i=t(1163),u=t(1664),l=t.n(u),o=t(7294),d=t(4480),_=t(338),p=t(5137),g=t(1967),m=t(3033),x=t(5486);function h(e){let{}=e,n=(0,d.sJ)(_.EA),t=(0,i.useRouter)(),s=(0,o.useRef)(),u=(0,o.useRef)(),h=(0,o.useRef)(),f=(0,o.useRef)(),[j,v]=(0,o.useState)(!0),[w,b]=(0,o.useState)(""),[N,k]=(0,o.useState)(!1),[y,A]=(0,o.useState)({isAlert:!1,message:"",confirm:(0,r.jsx)("button",{}),cancel:(0,r.jsx)("button",{})}),D=function(e){if(n)return A({isAlert:!0,message:(0,r.jsx)("span",{children:"이미 로그인 하셨습니다."}),confirm:(0,r.jsx)("button",{onClick:()=>{A({isAlert:!1}),t.push("/")},children:"확인"})}),!1;p.J.test(e.target.value)?(b(""),s.current.value=e.target.value):b("* 올바른 이메일 형식이 아닙니다")},O=function(e){u.current=e.target.value,u.current||h.current?u.current.length<8?b("* 비밀번호는 8글자 이상 입니다."):g.L.test(u.current)?h.current&&u.current!==h.current?b("* 비밀번호를 확인해주세요"):b(""):b("* 비밀번호는 (필수)문자+숫자 조합입니다."):b("")},L=function(e){h.current=e.target.value,u.current.length<8?b("* 비밀번호는 8글자 이상 입니다."):g.L.test(u.current)?u.current!==h.current?b("* 비밀번호를 확인해주세요"):b(""):b("* 비밀번호는 문자+숫자 조합입니다.")},C=function(){if(s.current.value&&h.current&&f.current.checked&&h.current===u.current){k(!0),b("");let e={email:s.current.value,password:u.current,provider:"credential"};fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.status?(0,c.signIn)("credentials",{email:e.email,password:u.current,redirect:!1}).then(async e=>{let{ok:n,error:s}=e,a=await (0,c.getSession)();n&&a?A({isAlert:!0,message:(0,r.jsxs)("span",{children:["\uD83C\uDF89회원가입을 축하합니다!\uD83D\uDD25\uD83D\uDD25 ",(0,r.jsx)("br",{})," [기념선물지급 - 닉네임변경권] ",(0,r.jsx)("br",{})," 마이페이지에서 사용 가능합니다"]}),confirm:(0,r.jsx)("button",{onClick:()=>{A({isAlert:!1}),t.push("/mypage")},children:"마이페이지"}),cancel:(0,r.jsx)("button",{onClick:()=>{A({isAlert:!1}),t.push("/")},children:"확인"})}):b(s)}):b(e.code||e.message||"일시적인 에러, 다시 시도해 주세요."),k(!1)})}else s.current.value?u.current===h.current&&u.current?f.current.checked||b("* 이용약관에 동의해주세요"):b("* 비밀번호를 다시 확인해주세요"):b("* 이메일을 확인해 주세요")};return(0,r.jsxs)("div",{className:a().wrap,children:[(0,r.jsxs)("div",{className:a().inner,children:[(0,r.jsx)("h1",{children:"JOOTONG 회원가입"}),(0,r.jsxs)("div",{className:a().credential,children:[(0,r.jsx)("div",{className:"".concat(a().email," ").concat(a().box),children:(0,r.jsx)("input",{ref:s,type:"text",maxLength:50,onBlur:e=>{D(e)},placeholder:"이메일@exam.com"})}),(0,r.jsx)("div",{className:"".concat(a().password," ").concat(a().box),children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"password",maxLength:20,onBlur:e=>{O(e)},placeholder:"비밀번호 8자리 이상"}),(0,r.jsx)("button",{className:a().password_hidden,onClick:()=>{v(!j)}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",maxLength:20,onBlur:e=>{O(e)},placeholder:"비밀번호 8자리 이상"}),(0,r.jsx)("button",{className:a().password_on,onClick:()=>{v(!j)}})]})}),(0,r.jsx)("div",{className:"".concat(a().password_confirm," ").concat(a().box),children:j?(0,r.jsx)("input",{type:"password",maxLength:20,onBlur:e=>{L(e)},placeholder:"비밀번호 확인"}):(0,r.jsx)("input",{type:"text",maxLength:20,onBlur:e=>{L(e)},placeholder:"비밀번호 확인"})}),w&&(0,r.jsx)("div",{className:a().error_message,children:w})]}),(0,r.jsxs)("label",{className:a().agree_label,children:[(0,r.jsx)("input",{type:"checkbox",ref:f}),(0,r.jsx)(l(),{onClick:()=>{f.current.checked=!0},href:"/policy/service",target:"_blank",children:"[필수]이용약관 동의하기"})]}),(0,r.jsx)("button",{className:a().signup,onClick:()=>{C()},children:"가입하기"}),N&&(0,r.jsx)("div",{className:a().loading,children:(0,r.jsx)(m.Z,{})})]}),y.isAlert&&(0,r.jsx)(x.Z,{props:{message:(0,r.jsx)("span",{children:y.message}),confirm:y.confirm,cancel:y.cancel}})]})}},338:function(e,n,t){"use strict";t.d(n,{sD:function(){return a},sO:function(){return u},EA:function(){return s},np:function(){return i}});var r=t(4480);let s=(0,r.cn)({key:"user"+new Date().getTime(),default:{user_key:"",nickname:""}}),a=(0,r.cn)({key:"dataList"+new Date().getTime(),default:[]}),c=(0,r.cn)({key:"calendar"+new Date().getTime(),default:[]}),i=(0,r.nZ)({key:"userSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(s)},set:(e,n)=>{let{set:t}=e;t(s,n)}}),u=(0,r.nZ)({key:"dataListSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(a)},set:(e,n)=>{let{set:t}=e;t(a,n=n.map(e=>(e.summaryOfContent=Object.values(JSON.parse(e.content))[0],e)))}});(0,r.nZ)({key:"calendarDataListSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(c)},set:(e,n)=>{let{set:t}=e;t(c,n=n.map(e=>(e.summaryOfContent=Object.values(JSON.parse(e.content))[0],e)))}})},5137:function(e,n,t){"use strict";t.d(n,{J:function(){return r}});let r=/^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/},1967:function(e,n,t){"use strict";t.d(n,{L:function(){return r}});let r=/^(?=.*[A-Za-z])(?=.*\d)[a-zA-Z\\d`~!@#$%^&*()-_=+]{8,20}$/},8097:function(e){e.exports={wrap:"Loading_wrap__gYMmd",loading:"Loading_loading__3R80z"}},4254:function(e){e.exports={wrap:"Alert_wrap__sjAzr",inner:"Alert_inner__yqBWk",message:"Alert_message__ODksr",button_box:"Alert_button_box__FJsUp"}},1679:function(e){e.exports={wrap:"signup_wrap__qW1vU",inner:"signup_inner__YSvn3",credential:"signup_credential___YfRG",box:"signup_box__W050L",password_hidden:"signup_password_hidden__1YdMy",password_on:"signup_password_on__CFxZP",error_message:"signup_error_message__UrajL",agree_label:"signup_agree_label__5Oxk8",signup:"signup_signup__ag3Nf",greeting:"signup_greeting__BT0Af",button_wrap:"signup_button_wrap__aPYEy",loading:"signup_loading__nxztw"}}},function(e){e.O(0,[664,685,774,888,179],function(){return e(e.s=1906)}),_N_E=e.O()}]);