(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{2413:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signin",function(){return s(6260)}])},3033:function(e,n,s){"use strict";s.d(n,{Z:function(){return r}});var i=s(5893),a=s(8097),t=s.n(a);function r(e){let{shape:n}=e;return(0,i.jsx)("div",{className:t().wrap,children:(0,i.jsxs)("div",{className:t().loading,children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})})}},7641:function(e,n,s){"use strict";s.d(n,{Z:function(){return d}});var i=s(5893),a=s(4634),t=s.n(a),r=s(3299),l=s(7294),c=s(1163),o=s(1664),u=s.n(o),_=s(3033);function d(e){let{setAlertData:n,setSnsSignup:s,callbackURL:a}=e,{data:o,update:d}=(0,r.useSession)(),g=(0,c.useRouter)(),m=(0,l.useRef)(!1),[p,h]=(0,l.useState)(!1),[x,j]=(0,l.useState)(""),f=function(){m.current.checked&&o?(h(!0),j(""),fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.user)}).then(e=>e.json()).then(async e=>{e.status?(o.user=e.data,await d({...o,user:{...null==o?void 0:o.user}}),setUserKey(o.user.user_key),h(!1),n({isAlert:!0,message:(0,i.jsxs)("span",{children:["\uD83C\uDF89회원가입을 축하합니다!\uD83D\uDD25\uD83D\uDD25 ",(0,i.jsx)("br",{})," [기념선물지급 - 닉네임변경권] ",(0,i.jsx)("br",{})," 마이페이지에서 사용 가능합니다"]}),confirm:(0,i.jsx)("button",{onClick:()=>{a?window.opener.parentCallback({method:"mypage"}):g.push("/mypage")},children:"마이페이지"}),cancel:(0,i.jsx)("button",{onClick:()=>{a?g.push(a):(g.push("/"),s(!1),n({isAlert:!1}))},children:"확인"})})):j(e.message)})):m.current.checked||j("* 이용약관에 동의해주세요")};return(0,i.jsxs)("div",{className:t().wrap,children:[(0,i.jsxs)("div",{className:t().inner,children:[(0,i.jsxs)("div",{className:t().greeting,children:["환영합니다, ",(0,i.jsx)("span",{children:"처음 오신 회원님!"})," ",(0,i.jsx)("br",{}),"이용약관 동의 가 필요합니다!"]}),(0,i.jsxs)("div",{className:t().credential,children:["로그인 하신 SNS 이메일",(0,i.jsx)("div",{className:t().email,children:(null==o?void 0:o.user.email)?(0,i.jsx)("input",{type:"text",value:(null==o?void 0:o.user.email)||"",readOnly:!0}):(0,i.jsx)(_.Z,{})}),x&&(0,i.jsx)("div",{className:t().error_message,children:x})]}),(0,i.jsxs)("label",{className:t().agree_label,children:[(0,i.jsx)("input",{type:"checkbox",ref:m}),(0,i.jsx)(u(),{onClick:()=>{m.current.checked=!0},href:"/policy/service",target:"_blank",children:"이용약관 동의하기"})]}),o&&(0,i.jsxs)("div",{className:t().button_group,children:[(0,i.jsx)("button",{className:t().signup,onClick:()=>{f()},children:"동의 후 계속 이용하기"}),(0,i.jsx)("button",{className:t().signout,onClick:()=>{(0,r.signOut)()},children:"취소"})]})]}),p&&(0,i.jsx)("div",{className:t().loading,children:(0,i.jsx)(_.Z,{})})]})}},5486:function(e,n,s){"use strict";s.d(n,{Z:function(){return r}});var i=s(5893),a=s(4254),t=s.n(a);function r(e){let{props:n}=e;return(0,i.jsx)("div",{className:t().wrap,children:(0,i.jsxs)("div",{className:t().inner,children:[(0,i.jsx)("div",{className:t().message,children:null==n?void 0:n.message}),(0,i.jsxs)("div",{className:t().button_box,children:[null==n?void 0:n.confirm,null==n?void 0:n.cancel]})]})})}s(3299),s(7294),s(1664)},6260:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return h}});var i=s(5893),a=s(8546),t=s.n(a),r=s(3299),l=s(7294),c=s(4480),o=s(338),u=s(1163),_=s(1664),d=s.n(_),g=s(7641),m=s(3033),p=s(5486);function h(){let e=(0,c.sJ)(o.EA),n=(0,u.useRouter)(),[s,a]=(0,l.useState)(""),[_,h]=(0,l.useState)(!0),[x,j]=(0,l.useState)(""),[f,v]=(0,l.useState)(!1),[k,N]=(0,l.useState)(!1),[b,S]=(0,l.useState)({isAlert:!1,message:"",confirm:(0,i.jsx)("button",{}),cancel:(0,i.jsx)("button",{})}),w=function(e){e.preventDefault(),(0,r.signIn)("credentials",{email:x,password:o.EA.current.password,redirect:!1}).then(async e=>{let{ok:n,error:s}=e,i=await getSession();n&&i?(f&&localStorage.setItem("login",x),setUserKey(i.user.user_key)):a(s)})};return(0,l.useEffect)(()=>{e?e.user.user_key?window.location.href.includes("callback")?n.back():n.push("/"):N(!0):(h(!1),localStorage.getItem("login")&&j(localStorage.getItem("login")))},[e]),_?(0,i.jsx)("div",{className:t().loading,children:(0,i.jsx)(m.Z,{})}):(0,i.jsxs)("div",{className:t().wrap,children:[(0,i.jsxs)("div",{className:t().inner,children:[(0,i.jsx)("h1",{className:t().title,children:"JOOTONG 로그인"}),(0,i.jsxs)("div",{className:t().credential,children:[(0,i.jsxs)("form",{children:[(0,i.jsx)("div",{className:t().email,children:(0,i.jsx)("input",{type:"text",value:x,maxLength:50,onChange:e=>{j(e.target.value)},placeholder:"이메일을 입력해주세요"})}),(0,i.jsx)("div",{className:t().password,children:(0,i.jsx)("input",{type:"password",maxLength:20,onChange:e=>{},required:!0,placeholder:"비밀번호"})}),s&&(0,i.jsx)("div",{className:t().error_message,children:s}),(0,i.jsx)("button",{className:t().login,onClick:e=>{w(e)},children:"로그인"})]}),(0,i.jsxs)("div",{className:t().util_box,children:[(0,i.jsxs)("label",{className:t().agree_label,children:[(0,i.jsx)("input",{type:"checkbox",checked:f,onChange:()=>{v(!f)}}),(0,i.jsx)("span",{children:"아이디 기억"})]}),(0,i.jsx)(d(),{href:"/auth/signup",className:t().signup,children:"간편 회원가입"}),(0,i.jsx)(d(),{href:"/auth/forgotpassword",className:t().forgot_password,children:"비밀번호 찾기"})]})]}),(0,i.jsxs)("div",{className:t().sns_login,children:[(0,i.jsx)("h1",{children:"SNS 계정 으로 로그인"}),(0,i.jsxs)("div",{className:t().sns_list,children:[(0,i.jsx)("div",{className:t().google_login,children:(0,i.jsx)("button",{className:t().google,onClick:()=>(0,r.signIn)("google",{callbackUrl:window.location.href+"?fromSNS"})})}),(0,i.jsx)("div",{className:t().naver_login,children:(0,i.jsx)("button",{className:t().naver,onClick:()=>(0,r.signIn)("naver",{callbackUrl:window.location.href+"?fromSNS"})})}),(0,i.jsx)("div",{className:t().kakao_login,children:(0,i.jsx)("button",{className:t().kakao,onClick:()=>(0,r.signIn)("kakao",{callbackUrl:window.location.href+"?fromSNS"})})})]})]})]}),k&&n.query.callbackURL&&(0,i.jsx)(g.Z,{setAlertData:S,setSnsSignup:N,callbackURL:n.query.callbackURL}),b.isAlert&&(0,i.jsx)(p.Z,{props:{message:(0,i.jsx)("span",{children:b.message}),confirm:b.confirm,cancel:b.cancel}})]})}},338:function(e,n,s){"use strict";s.d(n,{sD:function(){return t},sO:function(){return c},EA:function(){return a},np:function(){return l}});var i=s(4480);let a=(0,i.cn)({key:"user"+new Date().getTime(),default:{user_key:"",nickname:""}}),t=(0,i.cn)({key:"dataList"+new Date().getTime(),default:[]}),r=(0,i.cn)({key:"calendar"+new Date().getTime(),default:[]}),l=(0,i.nZ)({key:"userSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(a)},set:(e,n)=>{let{set:s}=e;s(a,n)}}),c=(0,i.nZ)({key:"dataListSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(t)},set:(e,n)=>{let{set:s}=e;s(t,n=n.map(e=>(e.summaryOfContent=Object.values(JSON.parse(e.content))[0],e)))}});(0,i.nZ)({key:"calendarDataListSelector"+new Date().getTime(),get:e=>{let{get:n}=e;return n(r)},set:(e,n)=>{let{set:s}=e;s(r,n=n.map(e=>(e.summaryOfContent=Object.values(JSON.parse(e.content))[0],e)))}})},8097:function(e){e.exports={wrap:"Loading_wrap__gYMmd",loading:"Loading_loading__3R80z"}},4634:function(e){e.exports={wrap:"SnsSignup_wrap__Cmy53",inner:"SnsSignup_inner__n_DVJ",greeting:"SnsSignup_greeting__wsgso",credential:"SnsSignup_credential__b8tVe",email:"SnsSignup_email__MmKIE",error_message:"SnsSignup_error_message__4KVFW",agree_label:"SnsSignup_agree_label__x1ZmA",button_group:"SnsSignup_button_group__zx9Z0",signup:"SnsSignup_signup__V5zhY",loading:"SnsSignup_loading__0ttm2"}},4254:function(e){e.exports={wrap:"Alert_wrap__sjAzr",inner:"Alert_inner__yqBWk",message:"Alert_message__ODksr",button_box:"Alert_button_box__FJsUp"}},8546:function(e){e.exports={wrap:"signin_wrap__GWyH9",inner:"signin_inner__BV_lq",title:"signin_title__ueWcE",credential:"signin_credential__KmBTK",email:"signin_email__oOt8T",login:"signin_login__7f_6q",error_message:"signin_error_message__L55h6",util_box:"signin_util_box__4JkuH",agree_label:"signin_agree_label__TbwDi",signup:"signin_signup__ztTnV",forgot_password:"signin_forgot_password__rYjnF",sns_login:"signin_sns_login__9Gmvu",sns_list:"signin_sns_list__xDZnA",google_login:"signin_google_login__WN8VP",naver_login:"signin_naver_login__FdVon",kakao_login:"signin_kakao_login__18Qvz",loading:"signin_loading__t9EL2"}}},function(e){e.O(0,[664,685,774,888,179],function(){return e(e.s=2413)}),_N_E=e.O()}]);