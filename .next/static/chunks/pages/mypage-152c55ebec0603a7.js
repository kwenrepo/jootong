(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{5301:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mypage",function(){return n(3810)}])},723:function(e,s,n){"use strict";n.d(s,{Z:function(){return o}});var r=n(5893),t=n(111),c=n.n(t),a=n(1664),i=n.n(a);function o(){return(0,r.jsx)("footer",{className:c().footer,children:(0,r.jsx)("div",{className:c().inner,children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"JOOTONG"}),(0,r.jsx)("li",{children:(0,r.jsx)(i(),{href:"/support",children:"Support"})})]})})})}},3810:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return N}});var r=n(5893),t=n(1582),c=n.n(t),a=n(7294),i=n(3299),o=n(4480),l=n(338),d=n(9598),u=n(723),_=n(1163),h=n(5486),m=n(1897),p=n.n(m);let x=/관리(?!.)|관리자(?!.)|운영자(?!.)|운영(?!.)|주통(?!.)|주식소통(?!.)|jootong(?!.)|JOOTONG(?!.)|개새끼|씨발|씨빨|씨이발|시발|시빨|씨이빨|좆|병신|조옺|벼엉신|븅신|뱡신|뵹신|씹새|십새|씹세|강간|윤간(?!호사)|보지|자지|성폭행|김대중|노무현|이재명|윤석열|이회창|문재인|박근혜|이명박|신창원|고유정|이재용|최태원|김정주|검|빛|뻐큐|빠큐|뽀큐|섹스|쎅스|빠구리|질내사정|질외사정|sex(?!y)|fuck|admin|love(?!.)|사랑(?!.)|김관(?!.)/i;var j=n(1967);function w(e){let{setIsLoading:s,setAlertData:n}=e,t=(0,o.sJ)(l.EA),[c,i]=(0,a.useState)("없음"),[d,u]=(0,a.useState)(!1),[_,h]=(0,a.useState)(!1),[m,w]=(0,a.useState)(!0),[f,g]=(0,a.useState)(""),[k,b]=(0,a.useState)(""),y=(0,a.useRef)({currentPassword:"",newPassword:"",checkPassword:""});function P(){_?h(!1):h(!0),b("")}let v=function(e){y.current.newPassword=e.target.value,y.current.newPassword||y.current.checkPassword?y.current.newPassword.length<8?b("* 비밀번호는 8글자 이상 입니다."):j.L.test(y.current.newPassword)?y.current.checkPassword&&y.current.newPassword!==y.current.checkPassword?b("* 비밀번호를 확인해주세요"):y.current.currentPassword===y.current.newPassword?b("* 입력하신 현재 비밀번호와 신규 비밀번호가 같습니다."):b(""):b("* 비밀번호는 (필수)문자+숫자 조합입니다."):b("")},N=function(e){y.current.checkPassword=e.target.value,y.current.newPassword||e.target.value?y.current.newPassword.length<8?b("* 비밀번호는 8글자 이상 입니다."):j.L.test(y.current.newPassword)?y.current.checkPassword&&y.current.newPassword!==y.current.checkPassword?b("* 비밀번호를 확인해주세요"):y.current.currentPassword===y.current.newPassword?b("* 입력하신 현재 비밀번호와 신규 비밀번호가 같습니다."):b(""):b("* 비밀번호는 (필수)문자+숫자 조합입니다."):b("")},C=function(){if(y.current.currentPassword&&y.current.newPassword&&y.current.checkPassword&&y.current.currentPassword!==y.current.newPassword){s(!0),g("");let e={user_key:t.user_key,current:y.current.currentPassword,new:y.current.newPassword};fetch("/api/user?change=password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.status&&h(!1),n({isAlert:!0,message:(0,r.jsx)("span",{children:e.message}),cancel:(0,r.jsx)("button",{onClick:()=>{n({isAlert:!1})},children:"확인"})}),s(!1)})}else y.current.newPassword.length<8?b("* 비밀번호는 8글자 이상 입니다."):j.L.test(y.current.newPassword)?y.current.newPassword&&y.current.newPassword!==y.current.checkPassword?b("* 비밀번호를 확인해주세요"):y.current.currentPassword===y.current.newPassword&&b("* 입력하신 현재 비밀번호와 신규 비밀번호가 같습니다."):b("* 비밀번호는 (필수)문자+숫자 조합입니다.")};return(0,a.useEffect)(()=>{d||(i(t.nickname),g(""))},[d]),(0,a.useEffect)(()=>{t&&i(t.nickname)},[t]),(0,r.jsxs)("div",{className:"".concat(p().my_profile," ").concat(p().box),children:[(0,r.jsx)("h2",{children:"프로필"}),(0,r.jsxs)("div",{className:p().my_nickname,children:[(0,r.jsxs)("div",{className:p().nickname,children:[(0,r.jsx)("span",{className:p().caption,children:"닉네임 |"}),d?(0,r.jsx)("input",{value:c,maxLength:10,onChange:e=>{i(e.target.value)}}):(0,r.jsx)("span",{children:c}),f&&(0,r.jsx)("div",{className:p().error_message,children:f})]}),(0,r.jsx)("div",{className:p().button_group,children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{!function(){if(0===t.item_nickname)return n({isAlert:!0,message:(0,r.jsx)("span",{children:"닉네임 변경권이 없습니다."}),confirm:(0,r.jsx)("button",{onClick:()=>n({isAlert:!1}),children:"확인"})}),u(!1);if(x.test(c)||!/^[가-힣a-zA-Z0-9]+$/.test(c))return g("사용할 수 없는 닉네임 입니다.");{s(!0),g("");let e={newNickname:c,nickname:t.nickname,user_key:t.user_key};fetch("/api/user?target=nickname",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(async e=>{e.status?(t.nickname=e.nickname,t.item.item_nickname-=1,await update({...t,user:{...t,nickname:e.nickname}}),n({isAlert:!0,message:(0,r.jsx)("span",{children:"닉네임 [".concat(t.nickname,"] 변경 성공")}),confirm:(0,r.jsx)("button",{onClick:()=>n({isAlert:!1}),children:"확인"})})):n({isAlert:!0,message:(0,r.jsx)("span",{children:e.message}),confirm:(0,r.jsx)("button",{onClick:()=>n({isAlert:!1}),children:"확인"})}),u(!1),s(!1)})}}()},children:"완료"}),(0,r.jsx)("button",{onClick:()=>{u(!1)},children:"취소"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{className:p().change_button,onClick:()=>{t.item_nickname?u(!0):(n({isAlert:!0,message:(0,r.jsx)("span",{children:"닉네임 변경권이 없습니다."}),confirm:(0,r.jsx)("button",{onClick:()=>n(e=>({...e,isAlert:!1})),children:"확인"})}),u(!1))},children:"변경하기"})})})]}),"credential"===t.provider&&(0,r.jsxs)("div",{className:p().change_password,children:[(0,r.jsxs)("div",{className:p().password,children:[(0,r.jsx)("span",{className:_?p().open:"",children:"비밀번호"}),(0,r.jsx)("div",{className:p().button_group,children:_?(0,r.jsx)("button",{onClick:()=>{P()},children:"취소"}):(0,r.jsx)("button",{onClick:()=>{P()},children:"변경하기"})})]}),_&&(0,r.jsxs)("div",{className:p().change_box,children:[(0,r.jsx)("div",{className:p().box,children:(0,r.jsx)("input",{type:"password",placeholder:"현재 비밀번호",maxLength:20,onChange:e=>{y.current.currentPassword=e.target.value}})}),(0,r.jsx)("div",{className:"".concat(p().box),children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"password",maxLength:20,onBlur:e=>{v(e)},placeholder:"비밀번호 8자리 이상"}),(0,r.jsx)("button",{className:p().password_hidden,onClick:()=>{w(!m)}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",maxLength:20,onBlur:e=>{v(e)},placeholder:"비밀번호 8자리 이상"}),(0,r.jsx)("button",{className:p().password_on,onClick:()=>{w(!m)}})]})}),(0,r.jsx)("div",{className:"".concat(p().box),children:m?(0,r.jsx)("input",{type:"password",maxLength:20,onBlur:e=>{N(e)},placeholder:"비밀번호 확인"}):(0,r.jsx)("input",{type:"text",maxLength:20,onBlur:e=>{N(e)},placeholder:"비밀번호 확인"})}),(0,r.jsx)("div",{className:p().button_group,children:(0,r.jsx)("button",{onClick:()=>{C()},children:"변경하기"})}),(0,r.jsx)("div",{className:p().error_message,children:k})]})]})]})}var f=n(6427),g=n.n(f),k=n(2932),b=n(1664),y=n.n(b);function P(){let e=(0,o.sJ)(l.EA);(0,_.useRouter)();let[s,n]=(0,a.useState)(!1),[t,c]=(0,a.useState)(""),[i,d]=(0,a.useState)([]);return(0,a.useEffect)(()=>{if(e){let s=e.user_key;fetch("/api/support?user_key="+s,{method:"get"}).then(e=>e.json()).then(e=>{d(e.data)})}},[e]),(0,r.jsxs)("div",{className:"".concat(g().my_history," ").concat(g().box),children:[(0,r.jsx)("h2",{children:"문의내역"}),(0,r.jsx)("div",{className:g().tab,children:(0,r.jsx)(y(),{className:g().question,href:"/support",children:"문의하기"})}),i.length?(0,r.jsx)("ul",{className:g().list,children:i.map(e=>(0,r.jsxs)("li",{className:g().item,children:[(0,r.jsxs)("div",{className:g().item_meta,children:[(0,r.jsxs)("div",{className:g().item_top,children:[(0,r.jsx)("span",{children:"문의날짜"}),(0,r.jsx)("span",{children:(0,k.getFormatedDate)({format:"YYYY/MM/DD",target:e.answer_date})}),(0,r.jsx)("span",{children:e.answer?"답변완료":"미답변"})]}),(0,r.jsx)("div",{className:g().item_title,onClick:()=>{var s;t===(s=e.idx)?c(""):c(s)},children:(0,r.jsx)("span",{children:e.title})})]}),t===e.idx&&(0,r.jsxs)("div",{className:g().content,children:[(0,r.jsx)("pre",{children:e.content}),e.answer&&(0,r.jsxs)("div",{className:g().answer,children:["--- [안녕하세요! 주식소통 입니다] ---",(0,r.jsx)("pre",{children:e.answer})]})]})]},e.create_date))}):(0,r.jsx)("div",{className:g().empty,children:"문의 내역이 없습니다."})]})}var v=n(3033);function N(){var e;let s=(0,o.sJ)(l.EA),n=(0,_.useRouter)(),[t,m]=(0,a.useState)({isAlert:!1,message:"",confirm:(0,r.jsx)("button",{}),cancel:(0,r.jsx)("button",{})}),p=(0,a.useRef)(""),[x,j]=(0,a.useState)(),[f,g]=(0,a.useState)(!0);function k(){g(!0);let e={user_key:s.user_key,nickname:s.nickname};fetch("/api/user",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.status?m({isAlert:!0,message:(0,r.jsxs)("span",{children:["회원탈퇴 가 완료 되었습니다!\uD83D\uDE2D ",(0,r.jsx)("br",{})," 그동안 이용해 주셔서 감사합니다.\uD83D\uDE47"]}),confirm:(0,r.jsx)("button",{onClick:()=>{(0,i.signOut)({callbackUrl:"".concat(window.location.origin)})},children:"확인"})}):m({isAlert:!0,message:(0,r.jsx)("span",{children:e.message}),confirm:(0,r.jsx)("button",{onClick:()=>{m({isAlert:!1})},children:"확인"})}),g(!1)})}return(0,a.useEffect)(()=>{s&&g(!1)},[s]),(0,r.jsxs)("div",{className:c().wrap,children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)("div",{className:c().inner,children:[(0,r.jsx)("nav",{children:(0,r.jsx)("button",{onClick:()=>{n.back()}})}),(0,r.jsx)(w,{setIsLoading:g,setAlertData:m}),(0,r.jsxs)("div",{className:"".concat(c().my_item," ").concat(c().box),children:[(0,r.jsx)("h2",{children:"보유 아이템"}),(0,r.jsx)("ul",{children:(0,r.jsxs)("li",{children:["닉네임 변경권 | ",(null===(e=s.item)||void 0===e?void 0:e.item_nickname)||0,"개"]})})]}),(0,r.jsx)(P,{}),s&&(0,r.jsx)("div",{className:c().button_box,children:(0,r.jsx)("button",{className:c().withdraw,onClick:()=>{s.provider?m({isAlert:!0,message:(0,r.jsxs)("span",{children:["탈퇴 하시면 회원 정보가 모두 삭제됩니다. ",(0,r.jsx)("br",{})," 정말 탈퇴 하시겠습니까?"]}),confirm:(0,r.jsx)("button",{onClick:()=>k(),children:"계속탈퇴진행하기"}),cancel:(0,r.jsx)("button",{onClick:()=>m({isAlert:!1}),children:"취소"})}):j(!0)},children:"회원탈퇴"})}),x&&(0,r.jsx)("div",{className:c().password_check,children:(0,r.jsxs)("div",{className:c().inner,children:[(0,r.jsxs)("div",{className:c().message,children:[(0,r.jsx)("span",{children:"비밀번호 확인"})," ",(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"password",ref:p,placeholder:"비밀번호를 입력해주세요"})]}),(0,r.jsx)("div",{className:c().button_box,children:(0,r.jsx)("button",{onClick:()=>(function(){if(p.current.value){let e={password:p.current.value,user_key:s.user_key,nickname:s.nickname};fetch("/api/user?checkPassword",{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.status?m({isAlert:!0,message:(0,r.jsxs)("span",{children:["탈퇴 하시면 회원 정보가 모두 삭제됩니다. ",(0,r.jsx)("br",{})," 정말 탈퇴 하시겠습니까?"]}),confirm:(0,r.jsx)("button",{onClick:()=>k(),children:"계속탈퇴진행하기"}),cancel:(0,r.jsx)("button",{onClick:()=>m({isAlert:!1}),children:"취소"})}):m({isAlert:!0,message:(0,r.jsx)("span",{children:e.message}),confirm:(0,r.jsx)("button",{onClick:()=>{m({isAlert:!1})},children:"확인"})})})}})(),children:"확인"})})]})}),t.isAlert&&(0,r.jsx)(h.Z,{props:{message:(0,r.jsx)("span",{children:t.message}),confirm:t.confirm,cancel:t.cancel}}),f&&(0,r.jsx)(v.Z,{})]}),(0,r.jsx)(u.Z,{})]})}},111:function(e){e.exports={footer:"Footer_footer__BcpJO",inner:"Footer_inner__3q9Lf"}},1897:function(e){e.exports={my_profile:"Profile_my_profile__v7LV0",my_nickname:"Profile_my_nickname__M4KBH",nickname:"Profile_nickname__eGxgJ",caption:"Profile_caption__RaQzC",error_message:"Profile_error_message__mWMCJ",button_group:"Profile_button_group__9pVlq",change_button:"Profile_change_button__L9qRA",change_password:"Profile_change_password__bv7tn",password:"Profile_password__f__Df",open:"Profile_open__hx_Sj",change_box:"Profile_change_box__LSCtV",box:"Profile_box__H8e1U",password_hidden:"Profile_password_hidden__5Zaei",password_on:"Profile_password_on__OnQbh",my_point:"Profile_my_point__5i_Xr"}},6427:function(e){e.exports={my_history:"SupportHistory_my_history__SpTBD",tab:"SupportHistory_tab__dD_PP",question:"SupportHistory_question__T_BmL",list:"SupportHistory_list__NtULv",item_meta:"SupportHistory_item_meta__TN_SY",item_top:"SupportHistory_item_top__rv93p",item_title:"SupportHistory_item_title__EBDxo",content:"SupportHistory_content__4IzeI",answer:"SupportHistory_answer__cEqFT",empty:"SupportHistory_empty__3QFsC"}},1582:function(e){e.exports={wrap:"mypage_wrap__WfIYk",inner:"mypage_inner__ECVpX",box:"mypage_box__h_4g0",my_item:"mypage_my_item__rIdEc",button_box:"mypage_button_box__P_RFI",password_check:"mypage_password_check__Zv9fQ",message:"mypage_message__lVy_7"}}},function(e){e.O(0,[664,685,598,774,888,179],function(){return e(e.s=5301)}),_N_E=e.O()}]);